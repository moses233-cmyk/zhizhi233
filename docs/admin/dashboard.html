<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>媒体后台 · Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      window.tailwind = window.tailwind || {};
      window.tailwind.config = {
        darkMode: ['class', '[data-mode=\"dark\"]'],
        theme: {
          extend: {
            colors: {
              night: {
                900: '#0b1120',
                800: '#111827',
                700: '#1f2937',
                100: '#e2e8f0',
              },
              accent: {
                500: '#3b82f6',
                600: '#2563eb',
                700: '#1d4ed8',
              },
            },
          },
        },
      };
    </script>
  </head>
  <body
    data-page="dashboard"
    class="min-h-screen bg-night-900 text-night-100 antialiased selection:bg-accent-600/25"
  >
    <div class="relative flex min-h-screen flex-col">
      <div
        class="pointer-events-none absolute inset-x-0 -top-40 mx-auto h-96 w-[32rem] rounded-full bg-accent-600/30 blur-[120px]"
      ></div>

      <main data-dashboard-view class="relative z-10 mx-auto flex w-full max-w-6xl flex-1 flex-col gap-10 px-6 pb-16 pt-12 sm:px-10">
        <header
          class="flex flex-col justify-between gap-6 rounded-3xl border border-white/5 bg-white/5 p-8 backdrop-blur-xl sm:flex-row sm:items-center sm:gap-10"
        >
          <div>
            <p class="text-sm uppercase tracking-[0.3em] text-white/60">Supabase Admin</p>
            <h1 class="mt-3 text-3xl font-semibold text-white sm:text-4xl">媒体管理后台</h1>
            <p class="mt-2 text-sm text-white/60">
              欢迎，<span data-admin-email class="font-medium text-white">管理员</span>
            </p>
          </div>
          <div class="flex items-center gap-3 self-start sm:self-auto">
            <button
              type="button"
              data-upload-button
              class="inline-flex items-center gap-2 rounded-full bg-accent-600 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-accent-600/20 transition hover:bg-accent-500"
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none">
                <path
                  d="M12 16V8m0 0l3 3m-3-3l-3 3M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              上传媒体
            </button>
            <input
              data-upload-input
              type="file"
              accept="image/*,video/*"
              multiple
              class="hidden"
            />
            <button
              type="button"
              data-signout
              class="inline-flex items-center gap-2 rounded-full border border-white/20 px-4 py-2 text-sm font-medium text-white/80 transition hover:border-red-400/50 hover:text-red-200"
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none">
                <path
                  d="M15.25 5.75V5a2 2 0 00-2-2h-6.5a2 2 0 00-2 2v14a2 2 0 002 2h6.5a2 2 0 002-2v-.75M21 12h-9m0 0l3.25-3.25M12 12l3.25 3.25"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              退出登录
            </button>
          </div>
        </header>

        <div
          data-upload-progress
          hidden
          class="rounded-3xl border border-accent-500/40 bg-accent-600/10 p-4 text-xs text-white/80 backdrop-blur"
        >
          <div class="flex items-center justify-between gap-3">
            <p data-upload-progress-label class="truncate font-medium text-white/90">
              正在上传文件...
            </p>
            <span data-upload-progress-percent class="tabular-nums text-white/70">0%</span>
          </div>
          <div class="mt-3 h-1.5 overflow-hidden rounded-full bg-white/10">
            <div
              data-upload-progress-bar
              class="h-full w-0 rounded-full bg-accent-500 shadow-[0_0_12px_rgba(59,130,246,0.6)] transition-all duration-200"
            ></div>
          </div>
        </div>

        <section
          class="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(260px,1fr)]"
          aria-label="相册管理"
        >
          <article
            class="flex flex-col gap-5 rounded-3xl border border-white/5 bg-white/5 p-6 backdrop-blur-xl"
          >
            <header class="flex items-start justify-between gap-4">
              <div>
                <h2 class="text-xl font-semibold text-white">相册选择</h2>
                <p class="text-sm text-white/60">请选择要归属的相册，支持多选，未选择时媒体将归为未分类。</p>
              </div>
              <button
                type="button"
                data-clear-albums
                class="rounded-full border border-white/10 px-3 py-1 text-xs text-white/70 transition hover:border-white/40 hover:text-white"
              >
                清空选择
              </button>
            </header>
            <p class="text-xs uppercase tracking-widest text-white/40" data-selected-albums>当前未选择相册</p>
            <div
              data-album-picker
              class="flex flex-wrap gap-2"
            ></div>
            <div>
              <h3 class="text-sm font-medium text-white/80">相册概览</h3>
              <ul
                data-album-stats
                class="mt-3 space-y-2 text-xs text-white/60"
              ></ul>
            </div>
          </article>
          <article
            class="flex flex-col gap-4 rounded-3xl border border-white/5 bg-white/10 p-6 backdrop-blur-xl"
          >
            <header>
              <h2 class="text-xl font-semibold text-white">创建新相册</h2>
              <p class="mt-1 text-sm text-white/60">可按项目、客户或主题分类，方便主页展示。</p>
            </header>
            <form data-create-album-form class="flex flex-col gap-4">
              <label class="grid gap-2 text-sm text-white/80">
                <span>相册名称</span>
                <input
                  type="text"
                  data-album-title
                  class="rounded-xl border border-white/15 bg-white/10 px-3 py-2 text-sm text-white outline-none transition placeholder:text-white/40 focus:border-accent-500 focus:ring-2 focus:ring-accent-500/40"
                  placeholder="例如：建筑空间 / 品牌宣传"
                  required
                />
              </label>
              <label class="grid gap-2 text-sm text-white/80">
                <span>简介（可选）</span>
                <textarea
                  data-album-description
                  rows="3"
                  class="rounded-xl border border-white/15 bg-white/10 px-3 py-2 text-sm text-white outline-none transition placeholder:text-white/40 focus:border-accent-500 focus:ring-2 focus:ring-accent-500/40"
                  placeholder="描述该相册的用途或主题"
                ></textarea>
              </label>
              <button
                type="submit"
                class="inline-flex items-center justify-center gap-2 rounded-full bg-accent-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-accent-500 disabled:cursor-not-allowed disabled:opacity-60"
              >
                新建相册
              </button>
              <p class="text-xs text-white/50">
                创建后会自动加入列表，并可立即用于媒体归类。
              </p>
            </form>
          </article>
        </section>

        <section
          class="flex flex-col gap-5 rounded-3xl border border-white/5 bg-white/5 p-6 backdrop-blur-xl"
          aria-label="资源管理"
        >
          <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
            <div>
              <h2 class="text-xl font-semibold text-white">资源库</h2>
              <p class="text-sm text-white/60">
                资源按照相册分组展示，可拖拽调整顺序、重命名，或拖动到其他相册完成重新归类。
              </p>
            </div>
            <span
              data-library-count
              class="inline-flex items-center justify-center rounded-full bg-white/10 px-3 py-1 text-xs font-medium text-white/70"
            >0</span>
          </div>

          <div
            data-storage-overview
            class="grid gap-3 text-sm text-white/70 sm:grid-cols-3"
            hidden
          >
            <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
              <p class="text-xs uppercase tracking-[0.2em] text-white/50">所有文件总体积</p>
              <p data-storage-total-size class="mt-2 text-2xl font-semibold text-white">0 B</p>
              <p class="mt-1 text-[11px] text-white/40">包含已上传的全部媒体资源</p>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
              <p class="text-xs uppercase tracking-[0.2em] text-white/50">已选相册总体积</p>
              <p data-storage-selected-size class="mt-2 text-2xl font-semibold text-white">0 B</p>
              <p data-storage-selected-count class="mt-1 text-[11px] text-white/40">已选 0 个相册</p>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
              <p class="text-xs uppercase tracking-[0.2em] text-white/50">最近文件体积</p>
              <p data-storage-latest-size class="mt-2 text-2xl font-semibold text-white">0 B</p>
              <p data-storage-latest-name class="mt-1 truncate text-[11px] text-white/40">尚未上传文件</p>
            </div>
          </div>

          <p
            data-library-empty
            class="rounded-2xl border border-dashed border-white/10 bg-black/20 px-4 py-6 text-center text-sm text-white/50"
            hidden
          >
            暂无任何媒体资源，上传后即可在此管理。
          </p>

          <div data-album-library class="flex flex-col gap-4"></div>
        </section>

      </main>
    </div>

    <script>
      window.__SB__ = {
        url: "https://qsgztmaenhieehyrclcm.supabase.co",
        anonKey:
          "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFzZ3p0bWFlbmhpZWVoeXJjbGNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA4MTc5MzUsImV4cCI6MjA3NjM5MzkzNX0.D1GxzSnYesnpflM3tbOWTk7BOopPyn6iqGv6X0K6Ej8",
      };
    </script>
    <script type="module" src="./dashboard.js"></script>
  </body>
</html>
